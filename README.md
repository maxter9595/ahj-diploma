## Установка и запуск проекта для локальной работы

Шаг 1. Клонирование репозитория

```
git clone https://github.com/maxter9595/ahj-diploma.git
cd ahj-diploma
```

Шаг 2. Настройка env и запуск бэкенда

Пример для бэкенда (папка backend, см. .env.example):

```
PORT=10000
```

Запуск серверной части:

```
cd backend
npm install         # Установка зависимостей
node server.js      # Запуск сервера
```

Шаг 3. Настройка env и запуск фронтенда

Пример для фронтенда (папка frontend, см. .env.example):

```
BASE_URL=http://localhost:10000
WS_URL=ws://localhost:10000
```

Запуск фронтенда:

```
cd frontend
npm install
yarn start
```

Загрузка проекта и его запуск относительно localhost:

![](./readme-images/motions/setup.gif)

## Сервер и деплой. Запуск проекта с сервером

![CI](https://github.com/maxter9595/ahj-diploma/actions/workflows/web.yml/badge.svg)

Server: [https://ahj-diploma-6967.onrender.com](https://ahj-diploma-6967.onrender.com) (порт 10000)

Deployment: Github Pages

![](./readme-images/motions/server-1.gif)

Запуск проекта относительно веб-сервера (render.com). В этом случае просто: 

• убираем переменные окружения, если они есть

• убеждаемся в наличии необходимых ссылок для подключения к веб-серверу. В самом коде пример уже приведен по умолчанию

• Запускаем фронтенд с рабочим веб-сервером

![](./readme-images/motions/server-2.gif)



## Вход в приложение

Для быстрого входа в приложение вводим следующие данные на странице авторизации - логин: `demo`, пароль: `demo`.

![](./readme-images/motions/login-enter.gif)

---

## Реализованные функции

### Обязательные для реализации функции (5/5)

• Сохранение ссылок и текстовых сообщений в истории

![](./readme-images/motions/text-save.gif)

---

• Ссылки должны быть кликабельны и отображаться как ссылки

![](./readme-images/motions/link-highlighter.gif)

---

• Сохранение в истории изображений, видео и аудио (как файлов), с отображением превью файла - через Drag & Drop и через иконку загрузки (скрепка в большинстве мессенджеров). 

Загрузка файла при помощи иконки загрузки:

![](./readme-images/motions/media-save-1.gif)


Загрузка файла при помощи Drag & Drop:

![](./readme-images/motions/media-save-2.gif)

---

• Скачивание файлов (на компьютер пользователя)

![](./readme-images/motions/download-button.gif)

---
• Ленивая подгрузка: сначала подгружаются последние 10 сообщений, при прокрутке вверх подгружаются следующие 10 и т.д.

![](./readme-images/motions/lazy-loading.gif)

---

### Дополнительные для реализации функции (13/17)

• Авторизация/регистрация - при первом открытии приложения будет предложено авторизоваться или зарегистрироваться. Чтобы авторизоваться необходимо ввести свой логин и пароль и нажать на кнопку `войти`. 

Изначально доступен один пользователь - логин: `demo`, пароль: `demo`. При успешной авторизации произойдет вход. При ошибке авторизации будет показано уведомление об ошибке. 

Авторизация:

![](./readme-images/motions/auth.gif)

Для регистрации необходимо нажать на кнопку `регистрация`, затем ввести новый логин и придуманный пароль и нажать кнопку `зарегестрироваться`. 

Регистрация:

![](./readme-images/motions/register-1.gif)

Для выхода из аккаунта необходимо нажать кнопку `выход`

Выход из аккаунта:

![](./readme-images/motions/logout.gif)

---

• Возможность загрузки аватара при регистрации. Для загрузки аватара необходимо нажать на иконку `загрузить аватар`. Откроется стандартное окно выбора файлов. Выберите необходимый файл. После выбора изображения появится превью аватара.

Загрузка аватара:

![](./readme-images/motions/register-2.gif)

---

• Синхронизация - если приложение открыто в нескольких окнах (вкладках) или с разных устройств, то контент будет синхронизироваться.

![](./readme-images/motions/sinhronization.gif)

---

• Запись видео и аудио (используя API браузера). Для записи видео или аудио нужно нажать соответствующую иконку, после этого начнется запись и будет отображен таймер. 

Начать и отменить запись:

![](./readme-images/motions/record.gif)

Для остановки и отправки записи необходимо нажать на иконку слева от таймера, для отмены записи нужно нажать на иконку справа от таймера.

Отправить запись:

![](./readme-images/motions/send-record.gif)

---

• Воспроизведение видео/аудио (используя API браузера)

![](./readme-images/motions/play-video.gif)

---

• Отправка геолокации и просмотр объекта в отдельном окне браузера в google картах при клике на кнопку.

![](./readme-images/motions/geolocation.gif)

---

• Статус пользователя - если пользователь онлайн, то его аватар помечен маркером (зеленый кружок) у всех участников чата, если пользователь нажал кнопку "выход" маркер изчезает у всех пользователей.

![](./readme-images/motions/status.gif)

---

• Просмотр вложений по категориям, например: аудио, видео, изображения, другие файлы (см. боковую меню Telegram)

![](./readme-images/motions/atachments.gif)

---

• Поиск по сообщениям (интерфейс + реализация на сервере). Поиск осуществляется по тексту сообщения

![](./readme-images/motions/search-message.gif)

---

• Поддержка смайликов (emoji)

![](./readme-images/motions/emoji.gif)

---

• Отправка зашифрованных сообщений и файлов (привет crypto-js!) с просмотром расшированных (для этого нужно ввести пароль) - важно эта функция засчитывается за две.

Для того чтобы отправить зашифрованное сообщение необходимо нажать на соответствующую пиктограмму (письмо с замком).

Далее будет предложено придумать пароль для расшифровки сообщения, после того как пароль будет введен и нажата кнопка `сохранить`, пиктограмма станет красного цвета и следующее отправленное текстовое сообщение или файл будут зашифрованны. 

Для расшифровки сообщения необходимо нажать на соответствующую пиктограмму на самом сообщении и ввести пароль. Каждый пароль действует для одного сообщения, отправленного после сохранения пароля. 

Отправка зашифрованного сообщения:

![](./readme-images/motions/encrypt-message.gif)

---

• Отправка команд боту, например: @chaos: погода, бот должен отвечать прогноз погоды (интеграция с реальными сервисами)

Для того чтобы получить информацию о доступных командах, необходимо нажать на соответствующую пиктограмму (см. рисунок ниже)

![](./readme-images/motions/command-info.gif)

---

• Поддержка оформления кода, например, при отправке сообщения в бэктиках. 

![](./readme-images/motions/code-design.gif)
